"use strict";var Re=Object.defineProperty;var Le=(e,t,r)=>t in e?Re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var te=(e,t,r)=>(Le(e,typeof t!="symbol"?t+"":t,r),r);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const x=require("react/jsx-runtime"),j=require("@jacobtipp/bloc"),f=require("react"),_=require("rxjs");function we(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const r in e)if(r!=="default"){const n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:()=>e[r]})}}return t.default=e,Object.freeze(t)}const w=we(f),fe=()=>!1,A=()=>!0,de=()=>!1,pe=e=>e,ve=()=>!0,I=f.createContext(void 0),Se=(e,t)=>{const r=f.createContext(null);return e.set(t.name,r),r},J=e=>{const t=f.useContext(I);if(!t)throw new Error("a contextMap does not exist");const r=t.get(e.name);if(!r)throw new Error(`${e.name} does not exist in the context map.`);const n=f.useContext(r);return n==null?void 0:n.instance},D=e=>J(e);function Be(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var z={exports:{}},F={},M={exports:{}},H={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var re;function xe(){if(re)return H;re=1;var e=f;function t(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,o=e.useEffect,u=e.useLayoutEffect,s=e.useDebugValue;function c(l,d){var E=d(),m=n({inst:{value:E,getSnapshot:d}}),O=m[0].inst,y=m[1];return u(function(){O.value=E,O.getSnapshot=d,i(O)&&y({inst:O})},[l,E,d]),o(function(){return i(O)&&y({inst:O}),l(function(){i(O)&&y({inst:O})})},[l]),s(E),E}function i(l){var d=l.getSnapshot;l=l.value;try{var E=d();return!r(l,E)}catch{return!0}}function p(l,d){return d()}var a=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:c;return H.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:a,H}var $={};/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ne;function Ce(){return ne||(ne=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var e=f,t=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function r(h){{for(var v=arguments.length,R=new Array(v>1?v-1:0),S=1;S<v;S++)R[S-1]=arguments[S];n("error",h,R)}}function n(h,v,R){{var S=t.ReactDebugCurrentFrame,b=S.getStackAddendum();b!==""&&(v+="%s",R=R.concat([b]));var B=R.map(function(L){return String(L)});B.unshift("Warning: "+v),Function.prototype.apply.call(console[h],console,B)}}function o(h,v){return h===v&&(h!==0||1/h===1/v)||h!==h&&v!==v}var u=typeof Object.is=="function"?Object.is:o,s=e.useState,c=e.useEffect,i=e.useLayoutEffect,p=e.useDebugValue,a=!1,l=!1;function d(h,v,R){a||e.startTransition!==void 0&&(a=!0,r("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var S=v();if(!l){var b=v();u(S,b)||(r("The result of getSnapshot should be cached to avoid an infinite loop"),l=!0)}var B=s({inst:{value:S,getSnapshot:v}}),L=B[0].inst,T=B[1];return i(function(){L.value=S,L.getSnapshot=v,E(L)&&T({inst:L})},[h,S,v]),c(function(){E(L)&&T({inst:L});var N=function(){E(L)&&T({inst:L})};return h(N)},[h]),p(S),S}function E(h){var v=h.getSnapshot,R=h.value;try{var S=v();return!u(R,S)}catch{return!0}}function m(h,v,R){return v()}var O=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",y=!O,C=y?m:d,W=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:C;$.useSyncExternalStore=W,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),$}var oe;function he(){return oe||(oe=1,process.env.NODE_ENV==="production"?M.exports=xe():M.exports=Ce()),M.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ue;function De(){if(ue)return F;ue=1;var e=f,t=he();function r(p,a){return p===a&&(p!==0||1/p===1/a)||p!==p&&a!==a}var n=typeof Object.is=="function"?Object.is:r,o=t.useSyncExternalStore,u=e.useRef,s=e.useEffect,c=e.useMemo,i=e.useDebugValue;return F.useSyncExternalStoreWithSelector=function(p,a,l,d,E){var m=u(null);if(m.current===null){var O={hasValue:!1,value:null};m.current=O}else O=m.current;m=c(function(){function C(S){if(!W){if(W=!0,h=S,S=d(S),E!==void 0&&O.hasValue){var b=O.value;if(E(b,S))return v=b}return v=S}if(b=v,n(h,S))return b;var B=d(S);return E!==void 0&&E(b,B)?b:(h=S,v=B)}var W=!1,h,v,R=l===void 0?null:l;return[function(){return C(a())},R===null?void 0:function(){return C(R())}]},[a,l,d,E]);var y=o(p,m[0],m[1]);return s(function(){O.hasValue=!0,O.value=y},[y]),i(y),y},F}var U={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var se;function We(){return se||(se=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var e=f,t=he();function r(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var n=typeof Object.is=="function"?Object.is:r,o=t.useSyncExternalStore,u=e.useRef,s=e.useEffect,c=e.useMemo,i=e.useDebugValue;function p(a,l,d,E,m){var O=u(null),y;O.current===null?(y={hasValue:!1,value:null},O.current=y):y=O.current;var C=c(function(){var R=!1,S,b,B=function(g){if(!R){R=!0,S=g;var K=E(g);if(m!==void 0&&y.hasValue){var G=y.value;if(m(G,K))return b=G,G}return b=K,K}var be=S,k=b;if(n(be,g))return k;var q=E(g);return m!==void 0&&m(k,q)?k:(S=g,b=q,q)},L=d===void 0?null:d,T=function(){return B(l())},N=L===null?void 0:function(){return B(L())};return[T,N]},[l,d,E,m]),W=C[0],h=C[1],v=o(a,W,h);return s(function(){y.hasValue=!0,y.value=v},[v]),i(v),v}U.useSyncExternalStoreWithSelector=p,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),U}process.env.NODE_ENV==="production"?z.exports=De():z.exports=We();var Te=z.exports;const ge=Be(Te),P=(()=>j.isServer()?f.useEffect:f.useLayoutEffect)(),_e=f.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)}),{useSyncExternalStoreWithSelector:Me}=ge,Ve=(e,t)=>{const r=t.suspendWhen,n=t.errorWhen,[{shouldSuspend:o},u]=f.useState(()=>({shouldSuspend:r(e.state)})),s=f.useRef(e.state),c=f.useRef(null),i=f.useRef(null),p=()=>_.firstValueFrom(e.state$.pipe(_.startWith(e.state),_.filter(a=>!r(e.state)||!r(a)))).then(()=>{c.current=null,s.current=null}).catch(()=>{c.current=null,s.current=null});if(o&&!c.current&&s.current&&(c.current=p()),P(()=>(i.current=e.state$.pipe(_.startWith(e.state)).subscribe(a=>{r(a)&&(s.current=a,u({shouldSuspend:!0}))}),()=>{var a;(a=i.current)==null||a.unsubscribe(),i.current=null}),[e]),n(e.state))throw new Oe(e.state);c.current&&_e(c.current)},Ee=(e,t)=>{const r=D(e),n=(t==null?void 0:t.selector)??pe,o=(t==null?void 0:t.listenWhen)??A,u=(t==null?void 0:t.suspendWhen)??fe,s=(t==null?void 0:t.errorWhen)??de;Ve(r,{suspendWhen:u,errorWhen:s});const c=f.useCallback(p=>{const a=r.state$.pipe(_.startWith(r.state),_.distinctUntilChanged(),_.filter(l=>o(l)),_.map(l=>n(l)),_.distinctUntilChanged()).subscribe(()=>setTimeout(()=>p(),0));return()=>{a.unsubscribe()}},[r]),i=Me(c,()=>r.state,()=>r.state,n);return f.useDebugValue(i),i};class Oe extends Error{constructor(r,n){super("useBlocSelector: errorWhen triggered a new render Error");te(this,"name","BlocRenderError");this.state=r}}const je=(e,t)=>{const r=Ee(e,t),n=D(e);return[r,n]},Q=(e,{listener:t,listenWhen:r})=>{const n=D(e),o=r??A,u=f.useRef(null);P(()=>(u.current=n.state$.pipe(_.startWith(n.state),_.pairwise(),_.filter(([s,c])=>!j.Bloc.ignoreListeners&&o(s,c)),_.map(([s,c])=>t(n,c))).subscribe(),()=>{var s;(s=u.current)==null||s.unsubscribe(),u.current=null}),[n])},Ae=e=>{const t=D(e),r=f.useCallback(o=>{const u=t.state$.subscribe(o);return()=>u.unsubscribe()},[t]),n=f.useSyncExternalStore(r,()=>t.state,()=>t.state);return f.useDebugValue(n),n},Ie=e=>J(e),Pe=(e,{listener:t,listenWhen:r},n)=>{const o=r??A,u=f.useRef(null),s=f.useRef(null);f.useEffect(()=>{var c;(c=s.current)==null||c.next(e)},[e]),P(()=>(s.current=new _.Subject,u.current=s.current.pipe(_.startWith(e),_.pairwise(),_.filter(([c,i])=>!j.Bloc.ignoreListeners&&o(c,i)),_.map(([c,i])=>t(i))).subscribe(),()=>{var c,i;(c=u.current)==null||c.unsubscribe(),u.current=null,(i=s.current)==null||i.complete(),s.current=null}),n??[])};function Ne({bloc:e,listener:t,listenWhen:r,children:n}){return Q(e,{listener:t,listenWhen:r}),x.jsxs(x.Fragment,{children:[" ",n," "]})}var X=()=>w.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner.current,ce=Symbol.for("react.strict_mode"),Ke=()=>{if(process.env.NODE_ENV==="production")return!1;const e=w.useRef(void 0),t=w.useMemo(()=>Number(w.version.split(".")[0]),[w.version]);if(isNaN(t)||t<18)return!1;if(e.current===void 0){let r=X();for(;r&&r.return;)r=r.return,(r.type===ce||r.elementType===ce)&&(e.current=!0)}return!!e.current},ie=new WeakSet;function Ge(e,t){const r=X();w.useEffect(()=>{if(!ie.has(r)){ie.add(r),e();return}return e()},t)}var ae=new WeakSet;function ke(e,t){return w.useMemo(()=>{const r=X();return ae.has(r)?e():(ae.add(r),null)},t)}function qe(e,t){var r;const n=Ke()&&process.env.NODE_ENV!=="production",o=n?ke:w.useMemo,u=n?Ge:w.useEffect,[s,c]=(r=o(()=>e(),t))!=null?r:[null,()=>null];return u(()=>c,t),s}const V=new WeakSet,Z=({children:e,classDef:t,dependencies:r=[],disposeTime:n=5*1e3,create:o,onMount:u,onUnmount:s})=>{const c=typeof o=="function",i=()=>{const d=c?o():o;return c&&setTimeout(()=>{V.has(d)||s==null||s(d)},n),d},p=qe(()=>{const d=i();return[d,()=>{s==null||s(d)}]},r);f.useEffect(()=>{const d=p;return u==null||u(d),!V.has(d)&&c&&V.add(d),()=>{V.delete(d)}},[p]);const a=f.useContext(I),l=f.useMemo(()=>a.get(t.name)??Se(a,t),[]);return f.createElement(l.Provider,{value:{instance:p}},e)},ee=({providers:e,children:t})=>{const r=f.useMemo(()=>e.map(o=>({children:u})=>x.jsx(o,{children:u})),[]),n=f.useMemo(()=>r.reduce((o,u)=>({children:s})=>x.jsx(o,{children:x.jsx(u,{children:s})}),({children:o})=>x.jsx(x.Fragment,{children:o})),[r]);return x.jsx(n,{children:t})},Fe=({bloc:e,children:t,dependencies:r=[],create:n,onMount:o})=>Z({classDef:e,create:n,onMount:o,onUnmount:u=>{typeof n=="function"&&u.close()},dependencies:r,children:t}),He=({providers:e,children:t})=>ee({providers:e,children:t});function Y(e,t){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},Y(e,t)}function $e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Y(e,t)}var Ue=function(t,r){return t===void 0&&(t=[]),r===void 0&&(r=[]),t.length!==r.length||t.some(function(n,o){return!Object.is(n,r[o])})},le={error:null},ze=function(e){$e(t,e);function t(){for(var n,o=arguments.length,u=new Array(o),s=0;s<o;s++)u[s]=arguments[s];return n=e.call.apply(e,[this].concat(u))||this,n.state=le,n.resetErrorBoundary=function(){for(var c,i=arguments.length,p=new Array(i),a=0;a<i;a++)p[a]=arguments[a];n.props.onReset==null||(c=n.props).onReset.apply(c,p),n.reset()},n}t.getDerivedStateFromError=function(o){return{error:o}};var r=t.prototype;return r.reset=function(){this.setState(le)},r.componentDidCatch=function(o,u){var s,c;(s=(c=this.props).onError)==null||s.call(c,o,u)},r.componentDidUpdate=function(o,u){var s=this.state.error,c=this.props.resetKeys;if(s!==null&&u.error!==null&&Ue(o.resetKeys,c)){var i,p;(i=(p=this.props).onResetKeysChange)==null||i.call(p,o.resetKeys,c),this.reset()}},r.render=function(){var o=this.state.error,u=this.props,s=u.fallbackRender,c=u.FallbackComponent,i=u.fallback;if(o!==null){var p={error:o,resetErrorBoundary:this.resetErrorBoundary};if(w.isValidElement(i))return i;if(typeof s=="function")return s(p);if(c)return w.createElement(c,p);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},t}(w.Component);const Ye=({bloc:e,fallback:t,onReset:r,children:n})=>{const o=D(e),u=f.useCallback(()=>r(o),[o]);return x.jsx(ze,{FallbackComponent:t,onReset:u,children:n})},Je=({repository:e,children:t,dependencies:r=[],create:n,onMount:o,onUnmount:u})=>Z({classDef:e,dependencies:r,onMount:o,onUnmount:u,create:n,children:t}),Qe=({providers:e,children:t})=>ee({providers:e,children:t});function me({bloc:e,builder:t,buildWhen:r}){const n=D(e),o=r??ve,u=f.useRef(null),[s,c]=f.useState(()=>n.state);return f.useLayoutEffect(()=>(u.current=n.state$.pipe(_.startWith(s),_.pairwise(),_.filter(([i,p])=>o(i,p)),_.map(([i,p])=>c(p))).subscribe(),()=>{var i;(i=u.current)==null||i.unsubscribe(),u.current=null}),[]),t(s)}function Xe({bloc:e,builder:t,buildWhen:r,listenWhen:n,listener:o}){return Q(e,{listener:o,listenWhen:n}),me({bloc:e,builder:t,buildWhen:r})}const ye=new Map,Ze=({children:e})=>f.createElement(I.Provider,{value:j.isServer()?new Map:ye},e);exports.BlocBuilder=me;exports.BlocConsumer=Xe;exports.BlocErrorBoundary=Ye;exports.BlocListener=Ne;exports.BlocProvider=Fe;exports.BlocRenderError=Oe;exports.MultiBlocProvider=He;exports.MultiProvider=ee;exports.MultiRepositoryProvider=Qe;exports.Provider=Z;exports.RepositoryProvider=Je;exports.RootProvider=Ze;exports.clientContextMap=ye;exports.createCachedContext=Se;exports.defaultBuildWhen=ve;exports.defaultErrorWhen=de;exports.defaultListenWhen=A;exports.defaultSelector=pe;exports.defaultSuspendWhen=fe;exports.rootContext=I;exports.use=_e;exports.useBloc=je;exports.useBlocInstance=D;exports.useBlocListener=Q;exports.useBlocSelector=Ee;exports.useBlocValue=Ae;exports.useIsomorphicLayoutEffect=P;exports.usePropListener=Pe;exports.useProvider=J;exports.useRepository=Ie;
